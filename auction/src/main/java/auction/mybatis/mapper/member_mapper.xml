<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="auction.repository.member.MemberDaoImpl">
	
	<!-- USER 회원가입. 회원가입 정보를 받아 DB에 저장 -->
	<insert id="regist_user" parameterType="member">
		insert into USER_TB values(
				user_tb_seq.nextval, 
				#{user_id},
				#{user_pw},
				#{user_nm},
				#{user_birth},
				#{user_gender},
				#{user_phone},
				#{user_tel},
				#{user_email},
				#{user_post},
				#{user_addr1},
				#{user_addr2},
				#{deliver_post},
				#{deliver_addr1},
				#{deliver_addr2},
				#{user_grade},
				sysdate,
				sysdate,
				#{session_id},
				#{session_limit}
				)
	</insert>
	
	<select id="login_user" parameterType="map" resultType="int">
		select count(*) from user_tb where user_id=#{user_id} and user_pw=#{user_pw}
	</select>
	
	<select id="grade_user" parameterType="string" resultType="string">
		select user_grade from user_tb where user_id=#{user_id}
	</select>
	
	<!-- userlist -->
	<select id="user_list" resultType="member">
		select
			user_id,
			user_nm,
			user_phone,
			user_email,
			user_post,
			user_addr1,
			user_addr2,
			deliver_post,
			deliver_addr1,
			deliver_addr2
		from user_tb
		order by user_id
	</select>
	
	<select id="get_user" parameterType="string" resultType="int">
		select user_sq from user_tb where user_id=#{user_id}
	</select>
	
</mapper>